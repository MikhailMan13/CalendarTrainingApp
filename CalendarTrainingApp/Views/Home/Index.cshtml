@{
    ViewData["Title"] = "Training Calendar";
}

<div class="text-center mb-4">
    <h1 class="display-4">Daily Training Goals</h1>
    <p class="lead">Track your daily progress</p>
</div>

<div class="row">
    <div class="col-md-8">
        <div id="calendar"></div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Today's Exercises</h5>
            </div>
            <div class="card-body">
                <form id="progressForm">
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="pushUps" name="pushUps">
                        <label class="form-check-label" for="pushUps">
                            100 Push-ups
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="squats" name="squats">
                        <label class="form-check-label" for="squats">
                            100 Squats
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="steps" name="steps">
                        <label class="form-check-label" for="steps">
                            5000 Steps
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary">Save Progress</button>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                dateClick: function(info) {
                    // Load progress for selected date
                    loadProgressForDate(info.date);
                },
                events: [
                    {
                        title: 'Daily Goals',
                        start: '2025-04-27',
                        allDay: true,
                        backgroundColor: '#28a745',
                        borderColor: '#28a745'
                    }
                ]
            });
            calendar.render();

            // Load today's progress
            loadProgressForDate(new Date());

            // Handle form submission
            document.getElementById('progressForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveProgress();
            });
        });

        function loadProgressForDate(date) {
            // In a real app, you would load this from localStorage or a backend
            const dateStr = date.toISOString().split('T')[0];
            const progress = JSON.parse(localStorage.getItem(`progress_${dateStr}`) || '{}');
            
            document.getElementById('pushUps').checked = progress.pushUps || false;
            document.getElementById('squats').checked = progress.squats || false;
            document.getElementById('steps').checked = progress.steps || false;
        }

        function saveProgress() {
            const date = new Date();
            const dateStr = date.toISOString().split('T')[0];
            const progress = {
                pushUps: document.getElementById('pushUps').checked,
                squats: document.getElementById('squats').checked,
                steps: document.getElementById('steps').checked
            };
            
            localStorage.setItem(`progress_${dateStr}`, JSON.stringify(progress));
            alert('Progress saved successfully!');
        }
    </script>
}
